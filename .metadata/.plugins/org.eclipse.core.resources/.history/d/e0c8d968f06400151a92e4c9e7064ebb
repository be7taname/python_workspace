'''
Created on Sep 24, 2015

@author: mianmianba
'''

class Calculate(object):
    def compEqu(self, equStack, equSymbol):
        if not equStack:
            equStack.append(equSymbol)
        if equStack.peek() == '*':
            equStack.pop()
            val1 = int(equStack.pop())
            equStack.append(str(val1 * int(equSymbol)))
        elif equStack.peek() == '/':
            equStack.pop()
            val1 = int(equStack.pop())
            equStack.append(str(val1 / int(equSymbol)))
        elif equStack.peek() == '+' or equStack.peek() == '-':
            if len(equStack) == 4:
                op = equStack.pop()
                val2 = int(equStack.pop())
                if equStack.pop() == '+':
                    equStack.append(str(int(equStack.pop()) + val2))
                else:
                    equStack.append(str(int(equStack.pop()) - val2))
                equStack.append(op)
                equStack.append(equSymbol)
        
    def solution(self, s):
        """
        :type s: str
        :rtype: int
        """
        equStack = []
        strLen = len(s)
        cnt = 0
        while cnt < strLen:
            cc = s[cnt]
            if cc >= '0' and cc <= '9':
                curNumStr = cc
                cnt = cnt + 1
                while cnt < strLen: # either (cc is not a number) or (cnt == strLen and cc is a number) 
                    cc = s[cnt]
                    if cc >= '0' and cc <= '9':
                        curNumStr += cc
                        cnt += 1
                    else:
                        break
                self.compEqu(equStack, curNumStr)
            elif cc in '+-*/':
                equStack.append(cc)
        
                