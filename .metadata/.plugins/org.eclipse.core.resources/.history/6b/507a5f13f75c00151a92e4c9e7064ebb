'''
Created on Sep 15, 2015

@author: mianmianba
'''

class calculate(object):
    def solution(self, s):
        """
        :type s: str
        :rtype: int
        """
        digits = ['0','1','2','3','4','5','6','7','8','9']
        signs = ['-', '+']
        res = 0
        sign = 1
        mode = 0
        for cc in s:
            if mode == 0:
                if cc in digits:
                    mode = 1
                    if cc == '0': val = 0
                    elif cc == '1': val = 1
                    elif cc == '2': val = 2
                    elif cc == '3': val = 3
                    elif cc == '4': val = 4
                    elif cc == '5': val = 5
                    elif cc == '6': val = 6
                    elif cc == '7': val = 7
                    elif cc == '8': val = 8
                    elif cc == '9': val = 9
                elif cc in signs:
                    mode = 2
                    if cc == '-': sign = -1
                    elif cc == '+': sign = 1
            elif mode == 1:
                if cc in digits:
                    val *= 10
                    if cc == '1': val += 1
                    elif cc == '2': val += 2
                    elif cc == '3': val += 3
                    elif cc == '4': val += 4
                    elif cc == '5': val += 5
                    elif cc == '6': val += 6
                    elif cc == '7': val += 7
                    elif cc == '8': val += 8
                    elif cc == '9': val += 9
                else:
                    res += sign*val
                    if cc in signs:
                        mode = 2
                        if cc == '-': sign = -1
                        elif cc == '+': sign = 1
                    else:
                        mode = 0
                        sign = 1
            elif mode == 2:
                if cc in digits:
                    mode = 1
                    if cc == '0': val = 0
                    elif cc == '1': val = 1
                    elif cc == '2': val = 2
                    elif cc == '3': val = 3
                    elif cc == '4': val = 4
                    elif cc == '5': val = 5
                    elif cc == '6': val = 6
                    elif cc == '7': val = 7
                    elif cc == '8': val = 8
                    elif cc == '9': val = 9
                else:
                    mode = 0
        return res
    