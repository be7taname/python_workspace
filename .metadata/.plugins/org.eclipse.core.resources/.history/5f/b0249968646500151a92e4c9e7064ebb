'''
Created on Sep 27, 2015

@author: mianmianba
'''

class IsValidBST(object):
    def solutions(self, root):
        """
        :type root: TreeNode
        :rtype: bool
        """
        if root == None: return True
        if root.left == None and root.right == None:
            return True
        if root.left != None:
            leftMax = self.MaxOrInvalid(root.left)
            if leftMax == -1: return False
            if leftMax >= root.val: return False
        if root.right != None:
            rightMax = self.MaxOrInvalid(root.right)
            if rightMax == -1: return False
            if rightMax <= root.val: return False
        return True
        
    def MaxOrInvalid(self, root):
        if root.left == None and root.right == None:
            return (root.val, root.val)
        if root.left != None:
            (leftMin, leftMax) = self.MaxOrInvalid(root.left)
            if leftMax == -1: return (-1, -1)
            if leftMax >= root.val: return (-1, -1)
        if root.right != None:
            (rightMin, rightMax) = self.MaxOrInvalid(root.right)
            if rightMin == -1: return -1
            if rightMin <= root.val: return -1
        if flag == 0 and 
        